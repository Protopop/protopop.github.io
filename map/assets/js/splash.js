//fadeInLogin();


function showquote(){
	
	$('.startQuote').fadeIn(500, function() {
			$(".regionQuote img").css("transform","scale3d(1, 1, 1)");
			$(".regionQuote img").css("-webkit-transform","scale3d(1, 1, 1)");
			
			
		});
		
}
function fadeInLogin() {
	$('#nim').hide();
	$('#nim').delay(800).fadeIn(100);
	$('.startlogo').hide();
	$('.startlogo').delay(800).fadeIn(100);
	setTimeout(loginIn, 1024);
}

function fadeInNewgame() {
	$('#nim3').hide();
	$('#nim3').delay(800).fadeIn(100);
	setTimeout(newgameIn, 1024);
}

function logoIn() {
	$('.vine01').css({
		'height': '200px'
	});
	$('.v1l1').css({
		'MozTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'msTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'webkitTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'oTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'transform': 'scale(1.5)'
	});




	$('.v1l2').css({
		'MozTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'msTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'webkitTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'oTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'transform': 'rotate(87deg) scale(1)'
	});



	$('.v1l3').css({
		'MozTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'msTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'webkitTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'oTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'transform': 'rotate(0deg) scale(.8)'
	});




	$('.v1l4').css({
		'MozTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'msTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'webkitTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'oTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'transform': 'rotate(0deg) scale(1)'
	});



	$('.v1l5').css({
		'MozTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'msTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'webkitTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'oTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'transform': 'rotate(80deg) scale(.6)'
	});



	$('#nim').css({
		'webkitTransform': 'scale3d(1,1,1)'
	});
	$('#nim').css({
		'MozTransform': 'scale3d(1,1,1)'
	});
	$('#nim').css({
		'transform': 'scale3d(1,1,1)'
	});




}

function loginIn() {
	$('.vine01').css({
		'height': '200px'
	});
	$('.v1l1').css({
		'MozTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'msTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'webkitTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'oTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'transform': 'scale(1.5)'
	});




	$('.v1l2').css({
		'MozTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'msTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'webkitTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'oTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'transform': 'rotate(87deg) scale(1)'
	});



	$('.v1l3').css({
		'MozTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'msTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'webkitTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'oTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'transform': 'rotate(0deg) scale(.8)'
	});




	$('.v1l4').css({
		'MozTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'msTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'webkitTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'oTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'transform': 'rotate(0deg) scale(1)'
	});



	$('.v1l5').css({
		'MozTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'msTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'webkitTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'oTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'transform': 'rotate(80deg) scale(.6)'
	});



	$('#nim2').css({
		'webkitTransform': 'scale3d(1,1,1)'
	});
	$('#nim2').css({
		'MozTransform': 'scale3d(1,1,1)'
	});
	$('#nim2').css({
		'transform': 'scale3d(1,1,1)'
	});




}

function newgameIn() {
	$('.vine01').css({
		'height': '200px'
	});
	$('.v1l1').css({
		'MozTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'msTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'webkitTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'oTransform': 'scale(1.5)'
	});
	$('.v1l1').css({
		'transform': 'scale(1.5)'
	});




	$('.v1l2').css({
		'MozTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'msTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'webkitTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'oTransform': 'rotate(87deg) scale(1)'
	});
	$('.v1l2').css({
		'transform': 'rotate(87deg) scale(1)'
	});



	$('.v1l3').css({
		'MozTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'msTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'webkitTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'oTransform': 'rotate(0deg) scale(.8)'
	});
	$('.v1l3').css({
		'transform': 'rotate(0deg) scale(.8)'
	});




	$('.v1l4').css({
		'MozTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'msTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'webkitTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'oTransform': 'rotate(0deg) scale(1)'
	});
	$('.v1l4').css({
		'transform': 'rotate(0deg) scale(1)'
	});



	$('.v1l5').css({
		'MozTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'msTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'webkitTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'oTransform': 'rotate(80deg) scale(.6)'
	});
	$('.v1l5').css({
		'transform': 'rotate(80deg) scale(.6)'
	});



	$('#nim3').css({
		'webkitTransform': 'scale3d(1,1,1)'
	});
	$('#nim3').css({
		'MozTransform': 'scale3d(1,1,1)'
	});
	$('#nim3').css({
		'transform': 'scale3d(1,1,1)'
	});

}

function closeLogo() {
	//playSound('menu',.1);
	lowLag.play('menu');
	fadeOutLogo();
	logoOut();
	$('#nim').css({
		'webkitTransform': 'scale3d(.9,.9,.9)'
	});
	$('#nim').css({
		'MozTransform': 'scale3d(.9,.9,.9)'
	});
	$('#nim').css({
		'transform': 'scale3d(.9,.9,.9)'
	});
	setTimeout(checkLogin, 600);
}

//function logIt() {
//	//playSound('good',.1);
//	lowLag.play('good2');
//	$('#loginBar').fadeOut(500, function() {
//		loadFullPage('pages/core/loginpage');
//	});
//}


function openMap() {

	$('#loginBar').fadeOut(500, function() {
		$('body').fadeOut(500, function() {
			showMap();
		});
	});
	setGlobalVersion();

	$('.openPlayer').show();
	$('.protopopSticker').delay(800).fadeOut(300);
	lowLag.play('good2');

}

function setGlobalVersion() {
	$('.versionNumber').text(version);
}

function checkLogin() {
	//alert("Parse.User.current() = "+Parse.User.current());
	if (Parse.User.current()) {
		$('body').fadeOut(500, function() {
			showMap();
		});
	} else {
		$('#loginBar').fadeIn(500);
	}
};

function fadeOutLogo() {

	$('#nim').css({
		'opacity': 0
	});
	$('#nim').css({
		'pointerEvents': 'none'
	});
}

function fadeOutLogo2() {

	$('#nim2').css({
		'opacity': 0
	});
}

function logoOut() {
	$('.vine01').css({
		'height': '0px'
	});
	$('.v1l1').css({
		'MozTransform': 'scale(.1)'
	});
	$('.v1l1').css({
		'msTransform': 'scale(.1)'
	});
	$('.v1l1').css({
		'webkitTransform': 'scale(.1)'
	});
	$('.v1l1').css({
		'oTransform': 'scale(.1)'
	});
	$('.v1l1').css({
		'transform': 'scale(.1)'
	});




	$('.v1l2').css({
		'MozTransform': 'rotate(87deg) scale(.1)'
	});
	$('.v1l2').css({
		'msTransform': 'rotate(87deg) scale(.1)'
	});
	$('.v1l2').css({
		'webkitTransform': 'rotate(87deg) scale(.1)'
	});
	$('.v1l2').css({
		'oTransform': 'rotate(87deg) scale(.1)'
	});
	$('.v1l2').css({
		'transform': 'rotate(87deg) scale(.1)'
	});



	$('.v1l3').css({
		'MozTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l3').css({
		'msTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l3').css({
		'webkitTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l3').css({
		'oTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l3').css({
		'transform': 'rotate(0deg) scale(.1)'
	});




	$('.v1l4').css({
		'MozTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l4').css({
		'msTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l4').css({
		'webkitTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l4').css({
		'oTransform': 'rotate(0deg) scale(.1)'
	});
	$('.v1l4').css({
		'transform': 'rotate(0deg) scale(.1)'
	});



	$('.v1l5').css({
		'MozTransform': 'rotate(80deg) scale(.1)'
	});
	$('.v1l5').css({
		'msTransform': 'rotate(80deg) scale(.1)'
	});
	$('.v1l5').css({
		'webkitTransform': 'rotate(80deg) scale(.1)'
	});
	$('.v1l5').css({
		'oTransform': 'rotate(80deg) scale(.1)'
	});
	$('.v1l5').css({
		'transform': 'rotate(80deg) scale(.1)'
	});



}

function logoClose() {
	$('#nim2').css({
		'webkitTransform': 'scale3d(.9,.9,.9)'
	});
	$('#nim2').css({
		'MozTransform': 'scale3d(.9,.9,.9)'
	});
	$('#nim2').css({
		'transform': 'scale3d(.9,.9,.9)'
	});
	logoOut();
	fadeOutLogo2();

	if (localStorage.getItem('savefile') == null) {
		setTimeout(showMap, 600);
	} else {


		setTimeout(showMap, 600);
	}
}

function logoDone() {
	clearGame();

	$('#nim3').css({
		'webkitTransform': 'scale3d(.5,.5,.5)'
	});
	$('#nim3').css({
		'MozTransform': 'scale3d(.5,.5,.5)'
	});
	$('#nim3').css({
		'transform': 'scale3d(.5,.5,.5)'
	});
	$('#stage').fadeOut(500);
	setTimeout(showMap, 600);
}

function changeBackground(backgroundPic) {
	$("#mask").css("backgroundImage", "url(assets/img/backgrounds/" + backgroundPic.toLowerCase() + ")");
}


function showScrollBox() {
	if(firstWelcome == false){
	//popMessage("Emperor Mortelle struggles to hold the aging Empyre together. Will the citizens of Nuju gain independance? Journey force and decide the fate of the nation.", "The Empyre is Crumbling");
	popMessage("A vast world full of adventure. Click labels to learn about the world, or landmarks to travel across the map.", "Welcome to Nimian Legends");
	//saveGame();
	firstWelcome = true;
	}

}


closeScroll();

function closeGoal() {

	//hideMarker(goal);
}

function getMarkerByName(nm) {
	var goalObject = locationArray.filter(function(obj) {
		return obj.displayName == nm;
	});
	return goalObject[0];
}


function fadeToolTip(){
	
		setTimeout(function() {
		$('.tipBubbleUI').fadeOut(600);

	}, toolTipTime)
	
}

function startGame(){
	$('.ui').fadeIn();
	$('.iconStats').fadeIn();
	$('.dock').fadeIn();
	$('.optionIcon').fadeIn();
	//showToolTip($('.questIcon'),'Click the QUEST ICON to see your CURRENT QUEST',false,false);
	
	
	showToolTipClone($('.questIcon'),'Click the QUEST ICON to see your CURRENT QUEST',false,false,true,'left');
	
//fadeToolTip();
	$(".deckButton").click(function() {  //use a class, since your ID gets mangled
		$(".deckButton").removeClass("selected");
		$(this).addClass("selected");      //add the class to the clicked element
	});
	
	
	gameStarted = true;
	
	
    if (currentQuest.boss) {

        nextBoss = currentQuest.boss;
    }
	map.closePopup();
	
	// ADD PERK AT START
	
	if(perkDeckArray[0] == null){
		var randomP = randomNumber(2);
	randomP==1?perkDeckArray[0] = generateObject(1,'perk',0):perkDeckArray[0] = generateObject(1,'perk',9);
	}
	
	if(deckArray[2] == null){
		var randomP = randomNumber(2);
	//randomP==1?deckArray[1] = generateObject(1,'perk',0):deckArray[1] = generateObject(1,'perk',9);
	}
	
	
	if(deckArray[1] == null){
	
	deckArray[1] = generateObject(1,'perk',0)
	}
	if(deckArray[2] == null){
	
	deckArray[2] = generateObject(1,'perk',9);
	}
	
	
	
	switchDeck.call();
	
	//showQuestMessage();

	//startQuest(currentQuest);
	
	
	

}

function showQuestMessage(){
	if(currentQuest.description){
		$('.messages').show();
		$('.messages').html(currentQuest.description);
	}
	}
	
	
	function sectionTitle(t){
		$('.sectionTitle').html(t);
		
	}
	
	
	function closeSideBar() {
		$('.sideBar').hide();
		
		
	}
	
	function openSideBar(){
		$('.sideBar').show();
		loadSideBarPage('omnipedia/beasts');
		sectionTitle('Beasts');
		
	}